// ...existing code from src/engine/undoRedo.ts...
