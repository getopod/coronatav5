// ...existing code from src/engine/advancedMoveValidation.ts...
