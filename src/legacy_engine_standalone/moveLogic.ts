// ...existing code from src/engine/moveLogic.ts...
